% TeX source file
% Sysprog WS 2010
% Beispiel 2: websh
% Philip Pickering
\input{../../template.ltx}

\begin{document}

\osuetitle{2}

\section*{Aufgabenstellung}

Schreiben Sie ein Programm, welches beliebige Programme aufruft und
deren Ausgaben für das Web formatiert.

\begin{verbatim}
    SYNOPSIS:
        websh [-e] [-h] [-s WORD:TAG]
\end{verbatim}

\subsection*{Anleitung}

Der Mutterprozess liest bis zum \osueconst{EOF} Zeilen ein und startet
jeweils zwei Kindprozesse. Der erste führt das in der Zeile angegebene
Programm inklusive Argumente durch ein beliebiges Mitglied der
\osuefunc{exec}-Familie aus. Die Standardausgabe soll dabei an den zweiten
Prozess umgeleitet werden.

Der zweite Kindprozess soll also die Ausgabe des ersten bekommen und
diese verarbeiten, um das Ergebnis in einem Webbrowser darstellbar auf
der Standardausgabe auszugeben. Primär sind daher Zeilenumbrüche zu
behandeln. Mit dem Parameter \osuearg{-e} soll die gesamte Ausgabe in ein
vollständiges \textsc{html}-Dokument eingebettet werden, also mit
umschließenden \verb_html_- und \verb_body_-Tags. Die Option \osuearg{-h}
fügt den Programmaufruf als Überschrift zwischen den jeweiligen
Programmausgaben ein, und \osuearg{-s} sucht nach Zeilen mit \osuearg{WORD}
und setzt sie in den angegebenen \osuearg{TAG}.

Sie dürfen eine sinnvolle Länge der Zeilen annehmen, als Konstante
definieren und damit arbeiten.

Ein Aufruf mit folgenden Eingaben:

\begin{verbatim}
$ ./websh -e -h -s Linux:h2
uname -sm
ls /dev/null
\end{verbatim}

sollte folgende Ausgabe produzieren:

\begin{verbatim}
<html><head></head><body>
<h1>uname -sm</h1>
<h2>Linux x86_64</h2><br />
<h1>ls /dev/null</h1>
/dev/null<br />
</body></html>
\end{verbatim}

\osueguidelinestwo

\end{document}
